{% extends 'base.html.twig' %}
{% block title %}Preventivo{% endblock %}
{% block body %}
<div class="main-panel">
    <div class="content-wrapper">
        <div class="row">
            <div class="col-9">
                <h3>Preventivo <small>Nuovo > Avanzato</small></h3>
            </div>
        </div>
        {% form_theme form 'jquery.collection.html.twig' %}
        {{ form_start(form) }}
        <div class="mt-3">
            <div class="card">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-2">
                            <strong>Cliente</strong>
                            <p><small>{{ func.uidToSurName(item.client) }} {{ func.uidToName(item.client) }}</small></p>
                        </div>
                        <div class="col-lg-2 ">
                            <strong>Data Generazione</strong>
                            <p><small>{{ item.date|date("d/m/Y") }}</small></p>
                        </div>
                        <div class="col-lg-2">
                            <strong>Tipo Impianto</strong>
                            <p><small>{{ func.plantIntToName(item.tipo) }}</small></p>
                        </div>
                        <div class="col-lg-1 ">
                            <strong>Kw Enel</strong>
                            <p><small>{{ item.kw }}</small></p>
                        </div>
                        <div class="col-lg-1 ">
                            <strong>Piani</strong>
                            <p><small>{{ item.pianiCasa }}</small></p>
                        </div>
                        <div class="col-lg-2 ">
                            <strong>Riscaldamento</strong>
                            <p><small>{{ func.heatingIntToName(item.riscaldamento) }}</small></p>
                        </div>
                        <div class="col-lg-2 ">
                            <strong>{% if item.opereMurarie == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Opere Murarie </strong><br>
                            <strong>{% if item.opereMurarieIntonaco == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Intonaco </strong><br>
                            <strong>{% if item.opereMurariePietra == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Pietra</strong>
                        </div>
                        <!--<div class="col-lg-1 ">
                            <strong>Sconto</strong>
                            <p><small>{{ item.sconto }}</small></p>
                        </div>-->
                    </div>
                    <div class="row mt-2">
                        <div class="col-lg-1">
                            <strong>Livello </strong>
                            <p><small>{{ item.level }}</small></p>
                        </div>
                        <div class="col-lg-1">
                            <strong>Metratura</strong>
                            <p><small>{{ item.squareMeters }}</small></p>
                        </div>
                        <div class="col-lg-1 ">
                            <strong>{% if item.trifase == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Trifase </strong><br>
                        </div>
                        <div class="col-lg-1 ">
                            <strong>Circuiti</strong>
                            <p><small>{{ item.numCircuiti }}</small></p>
                        </div>
                        <div class="col-lg-2 ">
                            <strong>{% if item.illumSicurezza >= 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Illum. Sicurezza </strong>&nbsp;&nbsp;{{ item.illumSicurezza }}<br>
                            <strong>{% if item.lampada == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Lampada fornita </strong><br>
                        </div>
                        <div class="col-lg-3">
                            <strong>SPD</strong>
                            <p><small>{% if item.spd == 1 %}SPD ad arrivo linea, Tolleranza R1{% elseif item.spd == 2 %}SPD ad arrivo linea, Tolleranza R1, Protezione sovratensioni{% endif %}</small></p>
                        </div>
                        <div class="col-lg-2 ">
                            <strong>Imp. Ausiliari</strong>
                            <p><small>{% if item.impAusiliari == 1 %}Campanello, citofono e videocitofono{% elseif item.impAusiliari == 2 %}Campanello, citofono e antintrusione, Controllo carichi{% elseif item.impAusiliari == 3 %}Campanello, citofono e antintrusione, Controllo carichi, Domotica{% endif %} </small></p>
                        </div>
                    </div>
                    <div class="row mt-2">
                        <div class="col-lg-2">
                            <strong>{% if item.campanello == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Campanello</strong><br>
                            <strong>{% if item.citVid == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Citofono</strong><br>
                            <strong>{% if item.citVid == 2 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;VideoCitofono</strong><br>
                        </div>
                        <div class="col-lg-2">
                            <strong>{% if item.antenna == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Predisposizione Antenna</strong><br>
                            <strong>{% if item.allarme == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Predisposizione Allarme</strong><br>
                            <strong>{% if item.illumEsterna == 1 %}<i class="fa fa-check text-success" style="margin-left:-5px"></i>{% else %}<i class="fa fa-times text-danger"></i>{% endif %}&nbsp;Illuminazione Esterna</strong><br>
                        </div>
                        <div class="col-lg-2">
                            <strong>Prese Dati</strong>
                            <p><small>{{ item.numPreseDati }}</small></p>
                        </div>
                        <div class="col-lg-2">
                            <strong>Prese Telefono</strong>
                            <p><small>{{ item.numPreseTelefono }}</small></p>
                        </div>
                        <div class="col-lg-2">
                            <strong>Sconto</strong>
                            <p><small>{{ item.sconto }} %</small></p>
                        </div>
                        <div class="col-lg-2">
                            <strong>Totale Preliminare</strong>
                            <p><small>{{ item.price }} €</small></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Aggiunte</h4>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-1" role="button" aria-expanded="false" aria-controls="collapse-1">
                            Ingresso Linee Enel e Telecom
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-2" role="button" aria-expanded="false" aria-controls="collapse-2">
                            Predisposizione Domotica
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-3" role="button" aria-expanded="false" aria-controls="collapse-3">
                            Impianto Satellitare
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-4" role="button" aria-expanded="false" aria-controls="collapse-4">
                            Diffusione Sonora
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-5" role="button" aria-expanded="false" aria-controls="collapse-5">
                            Sorround Soggiorno
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-6" role="button" aria-expanded="false" aria-controls="collapse-6">
                            Connettorizzazione Dati
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-7" role="button" aria-expanded="false" aria-controls="collapse-7">
                            Videosorveglianza Esterna
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-8" role="button" aria-expanded="false" aria-controls="collapse-8">
                            Predisposizione Allarme
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-9" role="button" aria-expanded="false" aria-controls="collapse-9">
                            Rilevazione Fumi
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-10" role="button" aria-expanded="false" aria-controls="collapse-10">
                            Allagamento e Gas
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-11" role="button" aria-expanded="false" aria-controls="collapse-11">
                            Motorizzazione Tapparelle
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-12" role="button" aria-expanded="false" aria-controls="collapse-12">
                            Cavi Motorizzazione Tapparelle
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-13" role="button" aria-expanded="false" aria-controls="collapse-13">
                            Centralino Telefonico
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-14" role="button" aria-expanded="false" aria-controls="collapse-14">
                            Impianto Citofonico
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-15" role="button" aria-expanded="false" aria-controls="collapse-15">
                            Impianto VideoCitofono
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-16" role="button" aria-expanded="false" aria-controls="collapse-16">
                            Rilevatori Luminosità
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-17" role="button" aria-expanded="false" aria-controls="collapse-17">
                            Illuminazione Esterna
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-18" role="button" aria-expanded="false" aria-controls="collapse-18">
                            Predisposizione Fotovoltaico
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-19" role="button" aria-expanded="false" aria-controls="collapse-19">
                            Sonde Temperatura
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-20" role="button" aria-expanded="false" aria-controls="collapse-20">
                            Cronotermostati
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-21" role="button" aria-expanded="false" aria-controls="collapse-21">
                            Armadio Rack
                        </a>
                        <a class="btn btn-primary ml-1 mb-2 collapsed" data-toggle="collapse" href="#collapse-22" role="button" aria-expanded="false" aria-controls="collapse-22">
                            B-Ticino LivingNow
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-sm-12">
                <div class="collapse mt-1 mb-2" id="collapse-1">
                    <div class="card">
                        <div class="card-body">
                            <h4>PRIMA AGGIUNTA POSSIBILE: predisposizione per ingresso linee ENEL e TELECOM</h4>
                            <div class="row">
                                <div class="col-sm-12">
                                    <strong>Predisposizione tubazione esterna interrata per ingresso Linea telefonica. Misura ipotetica da verificare in loco.</strong>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-10">
                                    <label>Tubazione flessibile in polietilene a doppia parete. Diametro esterno 50 mm</label>
                                </div>
                                <div class="col-sm-2">
                                    <input type="number" class="form-control" value="0" width="100%">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-2">
                    <div class="card">
                        <div class="card-body">
                            SECONDA AGGIUNTA POSSIBILE: completamento predisposizione per domotica con Relè passo passo.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-3">
                    <div class="card">
                        <div class="card-body">
                            TERZA AGGIUNTA POSSIBILE: impianto di antenna satellitare, completo di antenna ed accessori
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-4">
                    <div class="card">
                        <div class="card-body">
                            QUARTA AGGIUNTA POSSIBILE: oneri di predisposizione per diffusione sonora per gli ambienti dell'abitazione
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-5">
                    <div class="card">
                        <div class="card-body">
                            QUINTA AGGIUNTA POSSIBILE: oneri di predisposizione per impianto sorround soggiorno.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-6">
                    <div class="card">
                        <div class="card-body">
                            SESTA AGGIUNTA POSSIBILE: connettorizzazione dei punti di trasmissione dati predisposti e conteggiati nella proposta C.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-7">
                    <div class="card">
                        <div class="card-body">
                            SETTIMA AGGIUNTA POSSIBILE: oneri di predisposizione per videosorveglianza esterna.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-8">
                    <div class="card">
                        <div class="card-body">
                            OTTAVA AGGIUNTA POSSIBILE: oneri di predisposizione per sistema di rilevazione allarme.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-9">
                    <div class="card">
                        <div class="card-body">
                            NONA AGGIUNTA POSSIBILE: oneri di predisposizione per impianto di rilevazione fumi.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-10">
                    <div class="card">
                        <div class="card-body">
                            DECIMA AGGIUNTA POSSIBILE: predisposizioni per rilevatori sonde allagamento e gas.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-11">
                    <div class="card">
                        <div class="card-body">
                            UNDICESIMA AGGIUNTA POSSIBILE: oneri di predisposizione per motorizzazione di tapparelle, persiane, zanzariere, tende e/o oscuranti.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-12">
                    <div class="card">
                        <div class="card-body">
                            DODICESIMA AGGIUNTA POSSIBILE: oneri per passaggio cavi e collegamento di motorizzazioni per tapparelle, persiane, zanzariere, tende e/o oscuranti.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-13">
                    <div class="card">
                        <div class="card-body">
                            TREDICESIMA AGGIUNTA POSSIBILE: centralino telefonico con 2 linee esterne e 8 linee interne.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-14">
                    <div class="card">
                        <div class="card-body">
                            QUATTORDICESIMA AGGIUNTA POSSIBILE: impianto citofonico (solo audio)
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-15">
                    <div class="card">
                        <div class="card-body">
                            QUINDICESIMA AGGIUNTA POSSIBILE: impianto videocitofonico a colori in esecuzione a muro
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-16">
                    <div class="card">
                        <div class="card-body">
                            SEDICESIMA AGGIUNTA POSSIBILE: predisposizioni per rilevatori  luminosità.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-17">
                    <div class="card">
                        <div class="card-body">
                            DICIASSETTESIMA AGGIUNTA POSSIBILE: esempio di soluzione per la  predisposizione di  illuminazione esterna con 20 punti luce.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-18">
                    <div class="card">
                        <div class="card-body">
                            DICIOTTESIMA AGGIUNTA POSSIBILE: predisposizione per impianto fotovoltaico
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-19">
                    <div class="card">
                        <div class="card-body">
                            DICIANNOVESIMA AGGIUNTA POSSIBILE: punti presa di servizio per le sonde di temperatura di ogni ambiente, tranne le due conteggiate nella proposta C.
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-20">
                    <div class="card">
                        <div class="card-body">
                            VENTESIMA AGGIUNTA POSSIBILE: cronotermostati ambiente
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-21">
                    <div class="card">
                        <div class="card-body">
                            VENTUNESIMA AGGIUNTA POSSIBILE: armadio rack
                        </div>
                    </div>
                </div>
                <div class="collapse mt-1 mb-2" id="collapse-22">
                    <div class="card">
                        <div class="card-body">
                            VENTUNESIMA AGGIUNTA POSSIBILE: Placche e frutti marca BTicino serie Living-Now. Le esatte quantità verranno conteggiate a fine lavori.
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-1">
            <div class="col-sm-12">
                <div class="card">
                    <div class="card-body">
                        {{ form_start(form) }}
                        <div class="wrapper1" style="height: 30px;">
                        <div id="" class="float-left">
                            <h4 class="float-left mt-2"><strong>Piano</strong> {{ floor }}</h4>
                            <div class="btn-group float-right ml-3">
                                {% set oldFloor = floor - 1 %}
                                <a class="btn btn-secondary btn-sm" href="{{ url('nuovo_preventivo_avanzato', {'id': item.pid, 'floor': oldFloor }) }}">-</a>
                                {% set newFloor = floor + 1 %}
                                <a class="btn btn-secondary btn-sm" href="{{ url('nuovo_preventivo_avanzato', {'id': item.pid, 'floor': newFloor }) }}">+</a>
                            </div>

                        </div>
                        <div id="buttons" class="div1 float-right btn-group">
                            <a class="btn btn-secondary btn-sm" id="scroll-l" href="#" disabled="disabled"> < </a>
                            <a class="btn btn-secondary btn-sm" id="scroll-r" href="#"> > </a>
                        </div>
                    </div>
                    <div class="wrapper2">
                        <div class="div2">
                            <table class="table-2 table table-bordered  mt-3 mr-2 selector" style="position:relative">
                                <thead>
                                <tr>
                                    <th>TIPOLOGIA</th>
                                    {% for item in count %}
                                        <th>
                                            {{ func.room(item) }}
                                            {#{{ item.name }}#}
                                        </th>
                                    {% endfor %}
                                    <th>
                                        Sistemi
                                    </th>
                                </tr>
                            </thead>
                                {% set colCount = count|length + 1 %}
                            <tbody>
                                <tr>
                                    <td colspan="10">
                                        PUNTI PRESA
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong >{{ titles.0.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val1_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.1.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val2_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.2.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val3_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.3.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val4_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.4.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val5_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        PUNTI COMANDO
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.5.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val6_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.6.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val7_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        ILLUMINAZIONE PREDISPOSIZIONE ESCLUSI CORPI ILLUMINANTI
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.7.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val8_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.8.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val9_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.9.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val10_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.10.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val11_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.11.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val12_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.12.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val13_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.13.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val14_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.14.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val15_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.15.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val16_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        RISCALDAMENTO
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.16.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val17_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.17.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val18_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.18.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val19_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.19.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val20_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.20.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val21_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        QUADRO ELETTRICO
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.21.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val22_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.22.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val23_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.23.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val24_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.24.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                    <td>
                                        <input class="form-control" type="number" value="0" min="0" id="form_val25_{{ item }}">
                                    </td>
                                    {% endfor %}
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.25.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val26_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.26.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val27_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        SERVIZI PREDISPOSIZIONE
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.27.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val28_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.28.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val29_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.29.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val30_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.30.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val31_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.31.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val32_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.32.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val33_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.33.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val34_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.34.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val35_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.35.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val36_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.36.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val37_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.37.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val38_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.38.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val39_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.39.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val40_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.40.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val41_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.41.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val42_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.42.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val43_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.43.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val44_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.44.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val45_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.45.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val46_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        AUDIO-VIDEO E HOME THEATER PREDISPOSIZIONI
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.46.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val47_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.47.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val48_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.48.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val49_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.49.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val50_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.50.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val51_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.51.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val52_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.52.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val53_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        PREDISPOSIZIONE AUTOMATISMI
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.53.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val54_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.54.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val55_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.55.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val56_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.56.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val57_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.57.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val58_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.58.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val59_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        ASPIRAZIONE CENTRALIZZATA
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.59.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val60_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>{{ titles.60.description }}</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val61_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td colspan="10">
                                        RESOCONTO PLACCHE
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Supporti 503</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val62_{{ item }}">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Supporti 504</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val63_{{ item }}" onchange="check({{ item }},63)">
                                        </td>
                                    {% endfor %}
                                </tr>
                                <tr>
                                    <td>
                                        <strong>Supporti 506</strong>
                                    </td>
                                    {% for item in 1..colCount %}
                                        <td>
                                            <input class="form-control" type="number" value="0" min="0" id="form_val64_{{ item }}" onchange="check({{ item }},64)">
                                        </td>
                                    {% endfor %}
                                </tr>
                            </tbody>
                            {{ form_widget(form.submit) }}
                            <div class="row">
                                <div class="col-9"></div>
                                <div class="col-3">
                                    <div class="card card-generate ">
                                        <div class="card-body pt-2 pb-4">
                                            <div class="row">
                                                <div class="col-6">
                                                    <a href="" id="generateBtn" class="btn btn-success btn-block btn-sm mt-3 animsition-link">Genera</a>
                                                </div>
                                                <div class="col-6">
                                                    <a href="" class="btn btn-outline-danger btn-block btn-sm mt-3 animsition-link">Annulla</a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            {{ form_end(form) }}
                        </table>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            $(document).ready( function () {
                update({{ item.id }},'pp','val1');
                update({{ item.id }},'pl','val8');
                update({{ item.id }},'c1v','val6');
                update({{ item.id }},'c2v','val41');
                for(i=0; i < {{ colCount }}; i++) {
                    $("#form_val63_" + i ).prop('disabled', true);
                    $("#form_val64_" + i ).prop('disabled', true);
                }
                window.setTimeout(function() {
                    calculate(62);
                    for(i=0; i < {{ colCount }}; i++) {
                        $("#form_val63_" + i ).prop('disabled', false);
                        $("#form_val64_" + i ).prop('disabled', false);
                    }
                    },10000);
                //check();
            });

            $('#generateBtn').click(function(e) {
                e.preventDefault();
                toastr.info("Genero Preventivo");
                for(var i = 1; i < 65; i++) {
                    $('#appbundle_expertationsadvanced_val' + i).val(collect('val' + i));
                }
                $('#appbundle_expertationsadvanced_father').val({{ item.id }});
                $('#appbundle_expertationsadvanced_fatherFloor').val(0);
                $('#appbundle_expertationsadvanced_submit').trigger('click')
            });

            function collect(valn) {
                var arr = [];
                $('input[id^="form_' + valn + '_"]').each(function() {
                    arr.push($(this).val());
                });
                return arr.join(",");
            }

            function update(exp,field,valn){
                $.ajax({
                    url: '/ajax/get/expData/' + exp + '/' + field,
                    success: function (data) {
                        for (var i = 0; i < {{ colCount }}; i++) {
                            var numbersArray = data.split(',');
                            $.each(numbersArray, function(index, value) {
                                var ind = index +1;
                                $('#form_'+ valn + '_' + ind).val(value);
                            });

                        }
                    }
                })
            }
            function calculate(field) {
                for(var i = 0; i < {{ colCount }}; i++) {
                    var ind = i +1;
                    var values = parseInt($('#form_val1_' + ind ).val()) + parseInt($('#form_val6_' + ind ).val());
                    console.log(values);
                    $('#form_val' + field + '_' + ind ).val(values)
                }
            }
            function check(i,f) {

                var v = $("#form_val62_" + i).val(); //Let's say this is the value from PHP....
                var preVal = 0;

                $("#form_val62_" + i).val(v);

                $("#form_val" + f + "_" + i).on("change keyup keydown", function(event) {
                    let currVal = parseInt($("#form_val" + f + "_" + i).val());

                    console.log(preVal);
                    console.log(currVal);

                    // store current positions in variables
                    var start = this.selectionStart,
                        end = this.selectionEnd;

                    if (!currVal || currVal == 0) {
                        preVal = 0;
                        $("#form_val62_" + i).val(v);
                    } else if (currVal <= v) {
                        $("#form_val62_" + i).val((v - currVal) == 0 ? 0 : (v - currVal));
                        preVal = currVal;
                    } else {
                        $("#form_val" + f + "_" + i).val(v);
                    }

                    this.setSelectionRange(start, end);

                });
            }
            if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ) {
                $('#buttons').css('left','84%');
            }
        </script>
    </div>
</div>
    <script src="{{ asset('js/jquery.collection.js') }}"></script>
    <script type="text/javascript">
        $('.collection').collection();
    </script>
    <script src="{{ asset('js/jquery.toastr.js') }}" type="text/javascript"></script>
{% endblock %}
{% block stylesheets %}
    <style>
        .form-control {
            width: 100px;
            min-width: 100px;
        }
        .table td {
            min-width: 210px;
        }
        .table td:hover {
            background-color: #F0F0EE;
        }
        .table th {
            text-align: center;
        }
        .form-control {
            /*border:none!important;*/
            width: 150px!important;
            text-align: center!important;
            background-color: transparent;
        }
        select {
            width:100%!important;
        }
        #form_client {
            max-width:85%;
        }
        .input-group label {
            font-size: 13px;
            line-height: 1;
            vertical-align: top;
        }
        .card-generate {
            position: fixed;
            bottom: 0px;
            right: 0px;
            border-top: 1px solid #CCCCCC;
            border-left: 1px solid #CCCCCC;
            border-top-left-radius: 5px;
            z-index:1;
        }
        @media only screen and (max-width: 600px) {
            .card-generate {
                position: fixed;
                width: 100%;
            }
        }
        .fixed {
            top: 63px;
            right: 0px;
            left: 96%;
            background: white;
            width: 66px;
            border: 1px lightgrey solid;
            -webkit-transition: all 0.5s ease;
            -moz-transition: all 0.5s ease;
            -o-transition: all 0.5s ease;
            transition: all 0.5s ease;
        }
        .wrapper2 {
            width: 100%;
            overflow: hidden;
        }
        .collapsed {
            color: #308ee0;
            background-color: transparent;
            background-image: none;
            border: 1px solid #308ee0!important;
        }
    </style>
    <link rel="stylesheet" href="{{ asset('css/jquery.toastr.min.css') }}">
{% endblock %}
{% block javascripts %}
    <script src="{{ asset("js/jquery.fixedheadertable.min.js") }}"></script>
    <script>
        $('#scroll-r').click(function(e) {
            e.preventDefault();
            $(".table-2").animate({'left':'-=300px'}).scrollLeft();
            console.log($(".table-2").width());
            $("#scroll-r").attr("enabled","enabled");
            console.log($(".table-2").position())

        });
        $('#scroll-l').click(function(e) {
            e.preventDefault();
            console.log($(".table-2").position());
            if ($(".table-2").position.left >= 0) {
                return;
            }
            $(".table-2").animate({'left': '+=300px'}).scrollLeft()
        });
        $(window).bind('scroll', function () {
            if ($(window).scrollTop() > 333) {
                $('#buttons').addClass('fixed-top').addClass('fixed').animate();
                console.log("scrolled")
                /*$('.selector').fixedHeaderTable({
                    footer: false,
                    cloneHeadToFoot: false,
                    fixedColumn: false
                });*/
            } else {
                $('#buttons').removeClass('fixed-top').removeClass('fixed');
                console.log("top");
                $('.selector').fixedHeaderTable('destroy');
            }
        });


    </script>
    <script>
        $(document).ready(function () {
            $('#nav-hide-btn-icon').trigger('click');
            $('button[data-toggle="collapse"]').click(function(){
                //log the id of the target
                $(this).switchClass('btn-outline-primary','btn-primary');
            });
        });

    </script>
{% endblock %}
